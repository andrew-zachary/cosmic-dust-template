---
import Base from '../../../layouts/Base.astro';
import Section from '../../../components/articles/index/section.astro';

import translationsMeta from '../../../locals/meta.json';

const {lang} = Astro.params;
const title = {'ar': 'مقالات','en': 'articles'};
const mdxFiles = await Astro.glob('../../../data/*.mdx');

export async function getStaticPaths() {

    return translationsMeta.map(metaLang => {
        return {params: {lang: metaLang.name}};
    });
}
---

<Base title={title[lang]}>
    <Section />
    <ul id="articles-list">
        {
            mdxFiles.sort((a, b) => {
                return a['content']['order'] - b['content']['order'];
            }).map(mdxFile => <li>
                <a href={`/${lang}/articles/${mdxFile['content'][lang]['slug']}`}>
                    <h2 class="mb-montserrat">{mdxFile['content'][lang]['title']}</h2>
                </a>
            </li>)
        }
    </ul>
</Base>

<style lang="scss" is:global>
    @use '../../../styles/mixins.scss' as *;

    #articles-list {
        margin: 1.5rem 0 2rem 0;

        li {
            margin-bottom: 2rem;

            a {

                h2 {
                    font-size: 2.8rem;
                    font-weight: 400;
                    color: black;
                    border-bottom: 0.1rem rgba(0, 0, 0, 0.259) solid;
                    padding-bottom: 1rem;
                    @include withRtl('margin', 0 0 0 3rem, 0 3rem 0 0);

                    &:hover {
                        border-bottom: 0.1rem black solid;
                    }
                }
            }

            &:last-child {
                margin: 0;

                a {

                    h2 {
                        border-bottom: unset;
                    }
                }
            }
        }
    }
</style>
